jQuery(document).ready(function($){const buttonResult=$(".sidebar__buttons-result");let list_categories=$("#list_categories_filter").val().split(",");let list_years=$("#list_years_filter").val().split(",");buttonResult.click(function(){if(buttonResult.hasClass("active")){$(".sidebar").removeClass("active");}});if(list_categories){list_categories.forEach(function(category){if(category.trim()!==""){$(`input:checkbox[name=checked_category][value=${category}]`).prop("checked",true);}});}
if(list_years){list_years.forEach(function(year){if(year.trim()!==""){$(`input:checkbox[name=checked_year][value=${year}]`).prop("checked",true);}});}
$("#squaredcheck_all").change(function(){if($(this).is(":checked")){$("input:checkbox[name=checked_category]").prop("checked",true);}else{$("input:checkbox[name=checked_category]").prop("checked",false);}});$("#squaredcheck3").change(function(){if($(this).is(":checked")){$("input:checkbox[name=checked_year]").prop("checked",true);}else{$("input:checkbox[name=checked_year]").prop("checked",false);}});$(".clear__filter").click(function(){let parts=window.location.href.split('?');let baseUrl=parts[0];window.location.href=baseUrl;});var buttonsResult=$(".sidebar__buttons-result");var lengthCategoryChecked=$("input:checkbox[name=checked_category]:checked").length;var lengthYearChecked=$("input:checkbox[name=checked_year]:checked").length;if(lengthCategoryChecked>0||lengthYearChecked>0){buttonsResult.addClass("active");}else{buttonsResult.removeClass("active");}
checkCheckboxStatus();function updateUrl(param,list){let url=window.location.href;let newUrl;if(list.length>0){if(url.includes('?'+param+'=')){newUrl=url.replace(new RegExp('(?<=\\?'+param+'=)[^&]*','g'),list);}else if(url.includes('&'+param+'=')){newUrl=url.replace(new RegExp('(?<=\\&'+param+'=)[^&]*','g'),list);}else if(url.includes('?')){newUrl=url+'&'+param+'='+list;}else{newUrl=url+'?'+param+'='+list;}}else{newUrl=url.replace(new RegExp('[\\?&]'+param+'=[^&]*','g'),'');}
if(!newUrl.includes('?')&&newUrl.includes('&')){newUrl=newUrl.replace('&','?');}
window.location.href=newUrl;}
$(".sidebar__filter-category").change(function(){let list_categories=$("input:checkbox[name=checked_category]:checked").map(function(){return $(this).val();}).get().join(",");updateUrl('cate',list_categories);});$(".sidebar__filter-year").change(function(){let list_years=$("input:checkbox[name=checked_year]:checked").map(function(){return $(this).val();}).get().join(",");updateUrl('years',list_years);});function checkCheckboxStatus(){const allCategoriesChecked=$("input:checkbox[name=checked_category]").length===$("input:checkbox[name=checked_category]:checked").length;const allYearsChecked=$("input:checkbox[name=checked_year]").length===$("input:checkbox[name=checked_year]:checked").length;$("#squaredcheck_all").prop("checked",allCategoriesChecked);$("#squaredcheck3").prop("checked",allYearsChecked);}});