jQuery(document).ready(function($){let textSeemore="See more";let textCollapse="See less";if(fulbright.lang==="vi"){textSeemore="Xem thêm";textCollapse="Rút gọn";}
let maxHeightListLimit=0;if($(window).width()>991){maxHeightListLimit=800;}else{maxHeightListLimit=500;}
$(window).on("load",function(){$(".desc").each(function(){const detailContent=$(this);const scrollHeight=$(this).outerHeight();if(scrollHeight<=maxHeightListLimit){detailContent.addClass("hiddenMore");}else{detailContent.css("height",maxHeightListLimit+"px");detailContent.parent().find(".j_btn-more").text(textSeemore);}});});$(document).on("click",".j_btn-more",function(){const detailContent=$(this).prev(".desc");const scrollHeight=detailContent.prop("scrollHeight");$(this).toggleClass("active");detailContent.toggleClass("expanded");if(detailContent.hasClass("expanded")){detailContent.css("height",scrollHeight+"px");detailContent.removeClass("hiddenMore");$(this).text(textCollapse);}else{detailContent.css("height",maxHeightListLimit+"px");$(this).text(textSeemore);}});$("#signup-email").submit(function(event){event.preventDefault();let emailInput=$("input[name=email]");let userEmail=emailInput.val();let mailTo=$(".form").data("mail-to");let emailPattern=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(grecaptcha===undefined){$("#g-recaptcha-error").show();return;}
let response_recaptcha=grecaptcha.getResponse();if(!response_recaptcha||response_recaptcha==""){$("#g-recaptcha-error").show();return;}else{$("#g-recaptcha-error").hide();$('#signup-email input[type="submit"]').val("Loading");$('#signup-email input[type="submit"]').prop("disabled",true);if(!emailPattern.test(userEmail)){emailInput.addClass("error");event.preventDefault();}else{emailInput.removeClass("error");emailInput.addClass("valid");$.ajax({type:"POST",dataType:"html",url:fulbright.site_url+"/wp-admin/admin-ajax.php",data:{action:"submit_form_sign_up",mailTo:mailTo,userEmail:userEmail,},success:function(){location.reload();},});}}});});