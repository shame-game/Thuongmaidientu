(function($){"use strict";var $body=$("body"),$window=$(window),$burger=$body.find("#burger"),$posts=$("#news"),$slideshow=$("#slides"),$menu=$("#primary-menu"),$submenu=$menu.find("li.current-menu-item .sub-menu, li.current-menu-parent .sub-menu"),$back_to_top=$("#back-to-top"),windowHeight=0,closeMenu=function(){$body.removeClass("open-menu");$menu.find(".menu-item-has-children").removeClass("open").find(".sub-menu").removeAttr("style");},viewSize=function(){var width=$window.width(),newview=width>=992?"desktop":"mobile";return newview;},view=viewSize(),resizePage=function(){closeMenu();view=viewSize();if($submenu.length){$submenu.css("top");if(view==="desktop"&&$menu.innerHeight()>20){$body.addClass("extended-header");$submenu.css("top",$menu.innerHeight()+39);}}};$(window).on("load",function(){resizePage();}).on("throttledresize",function(){resizePage();});resizePage();var position=$(window).scrollTop(),scrolled=false,desktop_scrolled=false,checkScroll=function(){var newposition=$(window).scrollTop();if(newposition!==position){position=newposition;if(!scrolled&&position>0){scrolled=true;$body.addClass("scrolled");}else if(scrolled&&position<=0){scrolled=false;$body.removeClass("scrolled");}
if(!desktop_scrolled&&position>161){desktop_scrolled=true;$body.addClass("desktop-scrolled");}else if(desktop_scrolled&&position<=161){desktop_scrolled=false;$body.removeClass("desktop-scrolled");}}
window.requestAnimationFrame(checkScroll);};window.requestAnimationFrame(checkScroll);var goto_hash=function(hash){var target=$(hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]");if(target.length){var top=target.offset().top;if($("body").hasClass("scrolled")){if(view==="desktop"){top-=161+36;}else if(window.innerWidth>768&&window.innerWidth<=991){top-=40+50+48;}else{top-=100;}}else{if(view==="desktop"){top-=161+36;}else if(window.innerWidth>768&&window.innerWidth<=991){top-=40+80+48;}else{top-=130;}}
$("html, body").animate({scrollTop:top,},250);}};if(window.location.hash){goto_hash(window.location.hash);}
$(".sidebar .sidebar__sections li a").click(function(event){if(!$(this).parents(".sidebar__sections").hasClass("not-scroll")){$(".sidebar").removeClass("active");}else{event.preventDefault();}});$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(e){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){e.preventDefault();goto_hash(this.hash);}});if($slideshow.length){$slideshow.slick({arrows:false,dots:true,autoplay:true,autoplaySpeed:5000,});}
$back_to_top.on("click",function(e){e.preventDefault();$("html, body").animate({scrollTop:0,},250);});if($posts.length){var loading=false;$posts.on("click",".pager a",function(e){e.preventDefault();if(!loading){loading=true;var $a=$(this),$pager=$a.parent(".pager"),href=$a.prop("href");$pager.addClass("loading");$.get(href,function(data){var $data=$(data),$new_posts=$data.find("#news");$pager.remove();$posts.append($new_posts.html());loading=false;});}});}
$(".expand-item").each(function(){var $item=$(this),$question=$item.find(".question"),$answer=$item.find(".answer"),$body=$answer.find(".body");$question.on("click",function(){if($item.hasClass("open")){$answer.css("height",0);$item.removeClass("open");}else{$item.addClass("open");$answer.css("height",$body.innerHeight());}});});$burger.on("click",function(e){e.preventDefault();if($body.hasClass("open-menu")){closeMenu();}else{$body.addClass("open-menu");}});$menu.find(".menu-item-has-children").each(function(){var $parent=$(this),$submenu=$parent.find(".sub-menu");$parent.children("a").on("click",function(e){if(view==="mobile"){e.preventDefault();if($parent.hasClass("open")){$parent.removeClass("open");$submenu.slideUp();}else{$menu.find(".menu-item-has-children").removeClass("open").find(".sub-menu").slideUp();$parent.addClass("open");$submenu.slideDown();}}});});$menu.on("click",".menu-item-has-children > a",function(e){if(view==="mobile"){var $parent=$(this);if($parent.hasClass("open")){}}});})(jQuery);jQuery(document).ready(function(){jQuery("body").on("click",".popup_container .popup_wrapper .close_tot_popup",function(event){event.preventDefault();jQuery(".popup_container").removeClass("active");jQuery(".popup_container").removeClass("lock_body");});jQuery(window).scroll(function(){if(jQuery(this).scrollTop()>20){jQuery("#back-to-top").addClass("active");setTimeout(function(){jQuery("#back-to-top").removeClass("active");},4000);}else{jQuery("#back-to-top").removeClass("active");}});window.addEventListener("scroll",function(){const scrollY=window.scrollY;const headerHeight=230;const sections=document.querySelectorAll(".content__container section");const sidebarList=document.querySelectorAll(".sidebar__sections a");sections.forEach((section,indexSection)=>{const sectionTop=section.getBoundingClientRect().top+window.scrollY-headerHeight;const sectionBottom=section.getBoundingClientRect().bottom+window.scrollY-headerHeight;if(scrollY>=sectionTop&&scrollY<sectionBottom){if(sidebarList){sidebarList.forEach((nav,indexNav)=>{nav.classList.remove("active");indexSection==indexNav&&nav.classList.add("active");});}}});});if(jQuery(".content-wrapper")){window.addEventListener("scroll",function(){const scrollY=window.scrollY;const headerHeight=124;const sections=document.querySelectorAll(".content-wrapper > div");const sidebarList=document.querySelectorAll(".explore-more-list .explore-more-item");sections.forEach((section,indexSection)=>{const sectionTop=section.getBoundingClientRect().top+window.scrollY-headerHeight;const sectionBottom=section.getBoundingClientRect().bottom+
window.scrollY-
headerHeight;if(scrollY>=sectionTop&&scrollY<sectionBottom){if(sidebarList){sidebarList.forEach((nav,indexNav)=>{nav.classList.remove("active");indexSection==indexNav&&nav.classList.add("active");});}}});});}});jQuery(document).ready(function(){jQuery.validator.addMethod("fullname",function(value,element){if(/^[a-zA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂẾưăạảấầẩẫậắằẳẵặẹẻẽềềểếỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s\W|_]{2,}(?: [a-zA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂẾưăạảấầẩẫậắằẳẵặẹẻẽềềểếỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s\W|_]+){1,2}$/.test(value)){return true;}else{return false;}},"Please enter a valid full name.");jQuery.validator.addMethod("phonenumber",function(value,element){if(/(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(value)){return true;}else{return false;}},"Please enter a valid phone number.");jQuery.validator.addMethod("email",function(value,element){if(/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i.test(value)){return true;}else{return false;}},"Please enter a valid email.");jQuery.validator.addMethod("grecaptcha",function(value,element){console.log(value);if(value!=""){return true;}else{return false;}},"Invalid Capcha.");if(window.location.href.indexOf("vi")>-1){jQuery.extend(jQuery.validator.messages,{required:"Vui lòng nhập thông tin này.",});jQuery.validator.addMethod("fullname",function(value,element){if(/^[a-zA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂẾưăạảấầẩẫậắằẳẵặẹẻẽềềểếỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s\W|_]{2,}(?: [a-zA-ZÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂẾưăạảấầẩẫậắằẳẵặẹẻẽềềểếỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s\W|_]+){1,2}$/.test(value)){return true;}else{return false;}},"Vui lòng nhập tên hợp lệ.");jQuery.validator.addMethod("phonenumber",function(value,element){if(/(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(value)){return true;}else{return false;}},"Vui lòng nhập số điện thoại hợp lệ.");jQuery.validator.addMethod("email",function(value,element){if(/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i.test(value)){return true;}else{return false;}},"Vui lòng nhập email hợp lệ.");jQuery.validator.addMethod("grecaptcha",function(value,element){console.log(value);if(value!=""){return true;}else{return false;}},"Mã Capcha không hợp lệ.");}
function timestamp(){var response=document.getElementById("g-recaptcha-response");if(response==null||response.value.trim()==""){var elems=JSON.parse(document.getElementsByName("captcha_settings")[0].value);elems["ts"]=JSON.stringify(new Date().getTime());document.getElementsByName("captcha_settings")[0].value=JSON.stringify(new Date().getTime());}}
if(jQuery(".james__touch--form #captcha_settings").length){setInterval(timestamp,500);}
jQuery("#contact_form").validate({rules:{first_name:{fullname:true,},mail:{email:true,},mobile:{phonenumber:true,},allow:{required:true,minlength:1},},submitHandler:function(form,e){e.preventDefault();if(form.querySelector("#allow")&&form.querySelector("#allow").checked===false){form.querySelector(".error-allow").classList.remove("d-none");}else{form.querySelector(".error-allow").classList.add("d-none");if(grecaptcha===undefined){jQuery("#g-recaptcha-error").show();return;}
var response_recaptcha=grecaptcha.getResponse();if(!response_recaptcha||response_recaptcha==""){jQuery("#g-recaptcha-error").show();return;}else{jQuery("#g-recaptcha-error").hide();jQuery('.james__touch .james__touch--form input[type="submit"]').val("Loading");jQuery('.james__touch .james__touch--form input[type="submit"]').prop("disabled",true);}
e.preventDefault();var reason=[];jQuery(".james__touch--form .checkbox_group input:checked").each(function(){reason.push(jQuery(this).val());});jQuery.ajax({url:fulbright.site_url+"/wp-admin/admin-ajax.php",type:"POST",dataType:"html",data:{action:"submit_form_contact",reason:reason,type:jQuery(".james__touch--form #type").val(),mobile:jQuery(".james__touch--form #mobile").val(),first_name:jQuery(".james__touch--form #first_name").val(),provice:jQuery(".james__touch--form #provice").val(),mail:jQuery(".james__touch--form #mail").val(),description:jQuery(".james__touch--form #description").val(),level:jQuery(".james__touch--form #level").val(),utm_campaign:GetParameterValues("utm_campaign"),utm_content:GetParameterValues("utm_content"),utm_medium:GetParameterValues("utm_medium"),utm_source:GetParameterValues("utm_source"),utm_term:GetParameterValues("utm_term"),captcha_settings:jQuery(".james__touch--form #captcha_settings").val(),recaptcha:response_recaptcha,},}).done(function(response){var popupThank=document.querySelector(".popup__thank");var btnThankClose=document.querySelector(".popup__thank button");var blurElement=document.querySelector(".blur");popupThank.classList.add("active");blurElement.classList.add("active");location.reload();}).fail(function(){console.log("error");}).always(function(){console.log("complete");});}},});});jQuery(document).ready(function(){function createCookie(name,value,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);expires="; expires="+date.toUTCString();}
document.cookie=name+"="+value+expires+"; path=/";}
jQuery("#acceptCookie").click(function(){createCookie("FSPPMCookiesAccept","Accepted",90);jQuery("#cookiePopup").hide();});function getCookieValue(cookieName){var cookies=document.cookie.split("; ");for(var i=0;i<cookies.length;i++){var parts=cookies[i].split("=");if(parts[0]===cookieName){return decodeURIComponent(parts[1]);}}
return null;}
var acceptedCookieValue=getCookieValue("FSPPMCookiesAccept");if(acceptedCookieValue==="Accepted"){jQuery("#cookiePopup").hide();}});jQuery(document).ready(function($){if(document.documentElement.lang=="vi-VN"){if(jQuery(".previouspostslink")){jQuery(".previouspostslink").text("Trước");}
if(jQuery(".nextpostslink")){jQuery(".nextpostslink").text("Tiếp");}}
if(jQuery(".contact_form #type")){jQuery(".contact_form #type").change(function(e){if(document.documentElement.lang=="vi-VN"){switch(jQuery(this).val()){case"Parent":jQuery(this).parent().parent().find('#level option[name="default"]').text("Con em của tôi đang là học sinh lớp");break;case"Faculty":jQuery(this).parent().parent().find('#level option[name="default"]').text("Học sinh của tôi đang học lớp");break;case"Faculty":break;default:jQuery(this).parent().parent().find('#level option[name="default"]').text("Tôi đang là học sinh lớp");break;}}else{switch(jQuery(this).val()){case"Parent":jQuery(this).parent().parent().find('#level option[name="default"]').text("My child is currently a student in grade");break;case"Faculty":jQuery(this).parent().parent().find('#level option[name="default"]').text("My studtent is currently a student in grade");break;case"Faculty":break;default:jQuery(this).parent().parent().find('#level option[name="default"]').text("I am currently a student in grade");break;}}
e.preventDefault();});}});function GetParameterValues(param){var url=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<url.length;i++){var urlparam=url[i].split("=");if(urlparam[0]==param){return urlparam[1];}}}
jQuery(document).ready(function(){jQuery("img").each(function(){var img_src=jQuery(this).attr('src');if(typeof img_src!==typeof undefined&&img_src!==false){var img_alt=jQuery(this).attr('alt');var str=img_src
var pieces=str.split('/');var imgName=pieces[pieces.length-1];var imgnameArray=imgName.split('.');var alt=imgnameArray[0];if(img_alt==''||typeof img_alt===typeof undefined||img_alt===false){jQuery(this).attr('alt','Image of Fulbright University Vietnam');}}});});