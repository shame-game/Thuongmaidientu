jQuery(document).ready(function($){const origin=window.location.origin;const url=window.location.href;const path=new URL(url).pathname;const parts=path.split('/');const first_part=parts[1];const page_id=$('#page-id').val();const pinned_event=$('#pinned-event').val();let buttonResult=$('.sidebar__buttons-result');let list_years=JSON.parse($("#list_years_filter").val());if(list_years){list_years.forEach(function(year){$(`input:checkbox[name=checked_year][value=${year}]`).prop("checked",true);});}
buttonResult.click(function(){if($(this).hasClass('active')){$('.sidebar').removeClass('active');}});$('#squaredcheck3').change(function(){$('input:checkbox[name=checked_year]').prop('checked',$(this).is(':checked'));});$('.clear__filter').click(function(){let newUrl=origin+'/'+first_part;window.location.href=newUrl;});function eventFilter(){let event_type=$('#event-type').val();let buttonsResult=$('.sidebar__buttons-result');let lengthYearChecked=$('input:checkbox[name=checked_year]:checked').length;if(lengthYearChecked>0){buttonsResult.addClass('active');}else{buttonsResult.removeClass('active');}
list_years=$('input:checkbox[name=checked_year]:checked').map(function(){return $(this).val();}).get();$.ajax({type:'get',dataType:'html',url:fulbright.site_url+'/wp-admin/admin-ajax.php',data:{action:'events_filter',url_first_part:first_part,page_id:page_id,pinned_event:pinned_event,event_type:event_type,list_years:list_years,},success:function(str){$('#events-by-years').html(str);},});};if($('.btn-submit').is(':visible')){$(".sidebar__filter-year").off("change");}
else{$(".sidebar__filter-year").on("change",eventFilter);}
$('.btn-submit').click(eventFilter);function checkCheckboxStatus(){const allYearsChecked=$('input:checkbox[name=checked_year]').length===$('input:checkbox[name=checked_year]:checked').length;$('#squaredcheck3').prop('checked',allYearsChecked);}
checkCheckboxStatus();});